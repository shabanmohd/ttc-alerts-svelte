<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>TTC Alerts - Mobile-First IA Redesign v2</title>
  
  <!-- Lexend Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Lexend', 'system-ui', 'sans-serif'],
          },
          colors: {
            border: 'hsl(var(--border))',
            background: 'hsl(var(--background))',
            foreground: 'hsl(var(--foreground))',
            primary: {
              DEFAULT: 'hsl(var(--primary))',
              foreground: 'hsl(var(--primary-foreground))',
            },
            muted: {
              DEFAULT: 'hsl(var(--muted))',
              foreground: 'hsl(var(--muted-foreground))',
            },
            accent: {
              DEFAULT: 'hsl(var(--accent))',
              foreground: 'hsl(var(--accent-foreground))',
            },
            card: {
              DEFAULT: 'hsl(var(--card))',
              foreground: 'hsl(var(--card-foreground))',
            },
          },
        },
      },
    }
  </script>
  
  <style>
    :root {
      --background: 0 0% 100%;
      --foreground: 240 10% 3.9%;
      --card: 0 0% 100%;
      --card-foreground: 240 10% 3.9%;
      --primary: 240 5.9% 10%;
      --primary-foreground: 0 0% 98%;
      --muted: 240 4.8% 95.9%;
      --muted-foreground: 240 3.8% 46.1%;
      --accent: 240 4.8% 95.9%;
      --accent-foreground: 240 5.9% 10%;
      --border: 240 5.9% 90%;
      --radius: 0.5rem;
    }
    
    .dark {
      --background: 240 10% 3.9%;
      --foreground: 0 0% 98%;
      --card: 240 10% 6%;
      --card-foreground: 0 0% 98%;
      --primary: 0 0% 98%;
      --primary-foreground: 240 5.9% 10%;
      --muted: 240 3.7% 15.9%;
      --muted-foreground: 240 5% 64.9%;
      --accent: 240 3.7% 15.9%;
      --accent-foreground: 0 0% 98%;
      --border: 240 3.7% 20%;
    }
    
    * {
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: 'Lexend', system-ui, sans-serif;
      background-color: hsl(var(--background));
      color: hsl(var(--foreground));
      letter-spacing: -0.01em;
      overscroll-behavior: none;
    }
    
    /* Mobile Phone Frame */
    .phone-frame {
      max-width: 390px;
      margin: 0 auto;
      background: hsl(var(--background));
      min-height: 100vh;
      position: relative;
      box-shadow: 0 0 0 1px hsl(var(--border));
    }
    
    @media (min-width: 768px) {
      .phone-frame {
        margin-top: 2rem;
        margin-bottom: 2rem;
        min-height: calc(100vh - 4rem);
        border-radius: 2rem;
        overflow: hidden;
      }
    }
    
    /* TTC Colors */
    .route-line-1 { background: #ffc524; color: #000; }
    .route-line-2 { background: #00853f; color: #fff; }
    .route-line-4 { background: #a12f7d; color: #fff; }
    .route-line-6 { background: #808285; color: #fff; }
    .route-bus { background: #c8102e; color: #fff; }
    .route-streetcar { background: #c8102e; color: #fff; }
    .route-express { background: #00853f; color: #fff; }
    .route-night { background: #003da5; color: #fff; }
    
    /* Alert Status Badges */
    .badge-disruption { background: rgba(239, 68, 68, 0.15); color: #f87171; }
    .badge-detour { background: rgba(249, 115, 22, 0.15); color: #fb923c; }
    .badge-delay { background: rgba(245, 158, 11, 0.15); color: #fbbf24; }
    .badge-slowzone { background: rgba(234, 179, 8, 0.12); color: #facc15; border: 1px dashed rgba(234, 179, 8, 0.4); }
    .badge-elevator { background: rgba(168, 85, 247, 0.15); color: #c4b5fd; }
    .badge-resolved { background: rgba(34, 197, 94, 0.15); color: #86efac; }
    .badge-planned { background: rgba(59, 130, 246, 0.15); color: #93c5fd; }
    .badge-route-change { background: rgba(6, 182, 212, 0.15); color: #67e8f9; }
    
    /* Light mode badge overrides */
    :root:not(.dark) .badge-disruption { background: #fee2e2; color: #dc2626; }
    :root:not(.dark) .badge-detour { background: #ffedd5; color: #ea580c; }
    :root:not(.dark) .badge-delay { background: #fef3c7; color: #d97706; }
    :root:not(.dark) .badge-slowzone { background: #fef9c3; color: #ca8a04; border-color: rgba(202, 138, 4, 0.4); }
    :root:not(.dark) .badge-elevator { background: #f3e8ff; color: #9333ea; }
    :root:not(.dark) .badge-resolved { background: #dcfce7; color: #16a34a; }
    :root:not(.dark) .badge-planned { background: #dbeafe; color: #2563eb; }
    :root:not(.dark) .badge-route-change { background: #cffafe; color: #0891b2; }
    
    /* Header */
    .app-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: hsl(var(--background));
      border-bottom: 1px solid hsl(var(--border));
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .app-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      font-size: 1.125rem;
    }
    
    /* Primary Tabs - Sticky below header */
    .primary-tabs-container {
      position: sticky;
      top: 53px;
      z-index: 40;
      background: hsl(var(--background));
      padding: 0.75rem 1rem;
      border-bottom: 1px solid hsl(var(--border));
    }
    
    .primary-tabs {
      display: flex;
      gap: 0.25rem;
      padding: 0.25rem;
      background: hsl(var(--muted));
      border-radius: 0.625rem;
    }
    
    .primary-tab {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 0.5rem;
      font-size: 0.875rem;
      font-weight: 500;
      border-radius: 0.5rem;
      transition: all 0.15s;
      cursor: pointer;
      background: transparent;
      border: none;
      color: hsl(var(--muted-foreground));
    }
    
    .primary-tab.active {
      background: hsl(var(--background));
      color: hsl(var(--foreground));
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .primary-tab .count {
      font-size: 0.6875rem;
      font-weight: 600;
      padding: 0.125rem 0.4rem;
      border-radius: 9999px;
      background: hsl(var(--muted));
      min-width: 1.25rem;
      text-align: center;
    }
    
    .primary-tab.active .count {
      background: hsl(var(--primary));
      color: hsl(var(--primary-foreground));
    }
    
    /* Subway Status - Compact inline */
    .subway-status-bar {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.625rem 1rem;
      background: hsl(var(--muted) / 0.5);
      border-bottom: 1px solid hsl(var(--border));
      overflow-x: auto;
      scrollbar-width: none;
    }
    
    .subway-status-bar::-webkit-scrollbar { display: none; }
    
    .subway-status-label {
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: hsl(var(--muted-foreground));
      white-space: nowrap;
      flex-shrink: 0;
    }
    
    .subway-line-chip {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.25rem 0.625rem 0.25rem 0.375rem;
      border-radius: 9999px;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      font-size: 0.75rem;
      font-weight: 500;
      white-space: nowrap;
      cursor: pointer;
      transition: all 0.15s;
    }
    
    .subway-line-chip:hover {
      border-color: hsl(var(--foreground) / 0.3);
    }
    
    .subway-line-chip.has-issue {
      border-color: rgba(239, 68, 68, 0.5);
      background: rgba(239, 68, 68, 0.08);
    }
    
    .subway-line-chip .line-dot {
      width: 1.125rem;
      height: 1.125rem;
      border-radius: 0.25rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.625rem;
      font-weight: 700;
    }
    
    .subway-line-chip .status-icon {
      width: 0.875rem;
      height: 0.875rem;
    }
    
    /* Category Filter - Horizontal scroll */
    .category-filter-container {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid hsl(var(--border));
    }
    
    .category-filters {
      display: flex;
      gap: 0.5rem;
      overflow-x: auto;
      scrollbar-width: none;
      padding-bottom: 0.125rem;
    }
    
    .category-filters::-webkit-scrollbar { display: none; }
    
    .category-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.625rem 1rem;
      font-size: 0.8125rem;
      font-weight: 500;
      border-radius: 9999px;
      border: 1px solid hsl(var(--border));
      background: hsl(var(--background));
      color: hsl(var(--muted-foreground));
      white-space: nowrap;
      cursor: pointer;
      transition: all 0.15s;
      min-height: 2.5rem;
    }
    
    .category-btn:active {
      transform: scale(0.97);
    }
    
    .category-btn.active {
      border-color: hsl(var(--foreground));
      color: hsl(var(--foreground));
      background: hsl(var(--accent));
    }
    
    .category-btn .dot {
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 9999px;
      flex-shrink: 0;
    }
    
    .category-btn .count {
      font-size: 0.6875rem;
      font-weight: 600;
      padding: 0.0625rem 0.375rem;
      border-radius: 9999px;
      background: hsl(var(--muted));
    }
    
    .category-btn.active .count {
      background: hsl(var(--foreground) / 0.15);
    }
    
    /* Content Area */
    .content-area {
      padding: 0.75rem 1rem;
      padding-bottom: 5rem;
    }
    
    /* Alert Card - Touch optimized */
    .alert-card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: 0.75rem;
      overflow: hidden;
      margin-bottom: 0.75rem;
    }
    
    .alert-card-content {
      padding: 1rem;
    }
    
    .alert-card-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0.75rem;
      margin-bottom: 0.5rem;
    }
    
    .alert-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.375rem;
    }
    
    .route-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.625rem;
      font-size: 0.75rem;
      font-weight: 600;
      border-radius: 0.25rem;
      white-space: nowrap;
    }
    
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.1875rem 0.5rem;
      font-size: 0.625rem;
      font-weight: 600;
      border-radius: 0.25rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }
    
    .alert-timestamp {
      font-size: 0.6875rem;
      color: hsl(var(--muted-foreground));
      white-space: nowrap;
      flex-shrink: 0;
      padding-top: 0.125rem;
    }
    
    .alert-title {
      font-size: 0.9375rem;
      font-weight: 500;
      line-height: 1.45;
    }
    
    .alert-description {
      font-size: 0.8125rem;
      color: hsl(var(--muted-foreground));
      line-height: 1.5;
      margin-top: 0.375rem;
    }
    
    /* Earlier Updates Toggle */
    .earlier-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      width: 100%;
      padding: 0.625rem;
      font-size: 0.75rem;
      font-weight: 500;
      color: hsl(var(--muted-foreground));
      background: hsl(var(--muted) / 0.5);
      border: none;
      cursor: pointer;
      transition: background 0.15s;
    }
    
    .earlier-toggle:hover {
      background: hsl(var(--muted));
    }
    
    /* RSZ Indicator */
    .rsz-indicator {
      display: flex;
      align-items: center;
      gap: 0.375rem;
      margin-top: 0.5rem;
      padding: 0.5rem 0.625rem;
      background: rgba(234, 179, 8, 0.08);
      border: 1px dashed rgba(234, 179, 8, 0.3);
      border-radius: 0.5rem;
      font-size: 0.75rem;
    }
    
    .rsz-indicator .icon {
      color: #facc15;
    }
    
    /* Planned Section Tabs */
    .planned-subtabs {
      display: flex;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid hsl(var(--border));
      overflow-x: auto;
      scrollbar-width: none;
    }
    
    .planned-subtabs::-webkit-scrollbar { display: none; }
    
    .planned-subtab {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.5rem 0.875rem;
      font-size: 0.8125rem;
      font-weight: 500;
      border-radius: 0.5rem;
      border: 1px solid hsl(var(--border));
      background: transparent;
      color: hsl(var(--muted-foreground));
      white-space: nowrap;
      cursor: pointer;
      transition: all 0.15s;
    }
    
    .planned-subtab.active {
      background: hsl(var(--accent));
      border-color: hsl(var(--foreground) / 0.3);
      color: hsl(var(--foreground));
    }
    
    .planned-subtab .count {
      font-size: 0.625rem;
      font-weight: 600;
      padding: 0.125rem 0.375rem;
      border-radius: 9999px;
      background: hsl(var(--muted));
    }
    
    /* Planned Card */
    .planned-card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: 0.75rem;
      padding: 1rem;
      margin-bottom: 0.75rem;
    }
    
    .planned-card-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.625rem;
    }
    
    .planned-dates {
      display: flex;
      align-items: center;
      gap: 0.375rem;
      font-size: 0.75rem;
      color: hsl(var(--muted-foreground));
      margin-bottom: 0.5rem;
    }
    
    .planned-title {
      font-size: 0.9375rem;
      font-weight: 500;
      line-height: 1.45;
      margin-bottom: 0.375rem;
    }
    
    .planned-description {
      font-size: 0.8125rem;
      color: hsl(var(--muted-foreground));
      line-height: 1.5;
    }
    
    .planned-link {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.75rem;
      font-weight: 500;
      color: #3b82f6;
      margin-top: 0.625rem;
    }
    
    /* Recently Resolved Section */
    .resolved-section {
      margin-top: 1rem;
      border-top: 1px solid hsl(var(--border));
      padding-top: 1rem;
    }
    
    .resolved-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.625rem 0;
      cursor: pointer;
    }
    
    .resolved-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.8125rem;
      font-weight: 500;
      color: hsl(var(--muted-foreground));
    }
    
    .resolved-count {
      font-size: 0.625rem;
      font-weight: 600;
      padding: 0.125rem 0.4rem;
      border-radius: 9999px;
      background: rgba(34, 197, 94, 0.15);
      color: #86efac;
    }
    
    :root:not(.dark) .resolved-count {
      background: #dcfce7;
      color: #16a34a;
    }
    
    .resolved-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .resolved-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: hsl(var(--muted) / 0.5);
      border-radius: 0.5rem;
    }
    
    .resolved-item-info {
      flex: 1;
      min-width: 0;
    }
    
    .resolved-item-title {
      font-size: 0.8125rem;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .resolved-item-time {
      font-size: 0.6875rem;
      color: hsl(var(--muted-foreground));
    }
    
    /* Bottom Nav */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-around;
      padding: 0.5rem 0;
      padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
      background: hsl(var(--card));
      border-top: 1px solid hsl(var(--border));
      z-index: 50;
    }
    
    @media (min-width: 768px) {
      .bottom-nav {
        max-width: 390px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 0 0 2rem 2rem;
      }
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
      padding: 0.375rem 1rem;
      font-size: 0.625rem;
      font-weight: 500;
      color: hsl(var(--muted-foreground));
      background: none;
      border: none;
      cursor: pointer;
      transition: color 0.15s;
    }
    
    .nav-item.active {
      color: hsl(var(--foreground));
    }
    
    .nav-item i {
      width: 1.25rem;
      height: 1.25rem;
    }
    
    /* Section Divider */
    .section-divider {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 1rem 0 0.75rem;
    }
    
    .section-divider-line {
      flex: 1;
      height: 1px;
      background: hsl(var(--border));
    }
    
    .section-divider-label {
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: hsl(var(--muted-foreground));
    }
    
    /* Utility */
    .hidden { display: none !important; }
  </style>
</head>
<body>
  
  <!-- Info Banner -->
  <div class="bg-blue-500/10 border-b border-blue-500/20 px-4 py-2 text-center text-xs text-blue-400">
    <strong>Mobile-First IA Redesign v2</strong> â€” Scroll to see all sections
  </div>
  
  <!-- Phone Frame -->
  <div class="phone-frame">
    
    <!-- Header -->
    <header class="app-header">
      <div class="app-title">
        <span class="text-xl">ðŸš‡</span>
        <span>Service Alerts</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="text-xs text-[hsl(var(--muted-foreground))]">2m ago</span>
        <button class="p-2 rounded-lg hover:bg-[hsl(var(--accent))]" id="refresh-btn">
          <i data-lucide="refresh-cw" class="w-4 h-4"></i>
        </button>
      </div>
    </header>
    
    <!-- Primary Tabs: Now | Planned -->
    <div class="primary-tabs-container">
      <div class="primary-tabs">
        <button class="primary-tab active" data-tab="now" onclick="switchTab('now')">
          <i data-lucide="zap" class="w-4 h-4"></i>
          <span>Now</span>
          <span class="count">23</span>
        </button>
        <button class="primary-tab" data-tab="planned" onclick="switchTab('planned')">
          <i data-lucide="calendar" class="w-4 h-4"></i>
          <span>Planned</span>
          <span class="count">8</span>
        </button>
      </div>
    </div>
    
    <!-- ========== NOW TAB CONTENT ========== -->
    <div id="now-content">
      
      <!-- Subway Status Bar - Compact horizontal -->
      <div class="subway-status-bar">
        <span class="subway-status-label">Subway</span>
        <button class="subway-line-chip has-issue" onclick="filterByLine(1)">
          <span class="line-dot route-line-1">1</span>
          <i data-lucide="alert-circle" class="status-icon text-red-400"></i>
        </button>
        <button class="subway-line-chip has-issue" onclick="filterByLine(2)">
          <span class="line-dot route-line-2">2</span>
          <i data-lucide="alert-circle" class="status-icon text-red-400"></i>
        </button>
        <button class="subway-line-chip">
          <span class="line-dot route-line-4">4</span>
          <i data-lucide="check" class="status-icon text-green-400"></i>
        </button>
        <button class="subway-line-chip">
          <span class="line-dot route-line-6">6</span>
          <i data-lucide="check" class="status-icon text-green-400"></i>
        </button>
      </div>
      
      <!-- Category Filter -->
      <div class="category-filter-container">
        <div class="category-filters">
          <button class="category-btn active" onclick="setCategory(this)">
            <span class="dot bg-red-500"></span>
            <span>Disruptions</span>
            <span class="count">4</span>
          </button>
          <button class="category-btn" onclick="setCategory(this)">
            <span class="dot bg-amber-400"></span>
            <span>Delays</span>
            <span class="count">12</span>
          </button>
          <button class="category-btn" onclick="setCategory(this)">
            <span class="dot bg-purple-400"></span>
            <span>Elevators</span>
            <span class="count">7</span>
          </button>
        </div>
      </div>
      
      <!-- Alerts List -->
      <div class="content-area">
        
        <!-- Alert: Detour (Disruption category) -->
        <div class="alert-card">
          <div class="alert-card-content">
            <div class="alert-card-header">
              <div class="alert-badges">
                <span class="route-badge route-bus">34A</span>
                <span class="status-badge badge-detour">Detour</span>
              </div>
              <span class="alert-timestamp">2h ago</span>
            </div>
            <p class="alert-title">34A Eglinton East: Detour via Don Mills Rd, Wynford Dr due to collision</p>
            <p class="alert-description">Eastbound buses diverting. Expected to resume by 4:00 PM.</p>
          </div>
          <button class="earlier-toggle">
            <span>2 earlier updates</span>
            <i data-lucide="chevron-down" class="w-3.5 h-3.5"></i>
          </button>
        </div>
        
        <!-- Alert: Disruption (Subway) -->
        <div class="alert-card">
          <div class="alert-card-content">
            <div class="alert-card-header">
              <div class="alert-badges">
                <span class="route-badge route-line-1">Line 1</span>
                <span class="status-badge badge-disruption">No Service</span>
              </div>
              <span class="alert-timestamp">45m ago</span>
            </div>
            <p class="alert-title">Line 1: No subway service between Eglinton and Sheppard-Yonge</p>
            <p class="alert-description">Shuttle buses running. Use Line 2 as alternate route.</p>
          </div>
        </div>
        
        <!-- Section: Delays (when in Delays filter) -->
        <div class="section-divider" id="delays-section">
          <span class="section-divider-line"></span>
          <span class="section-divider-label">Delays & Slow Zones</span>
          <span class="section-divider-line"></span>
        </div>
        
        <!-- Alert: Regular Delay -->
        <div class="alert-card">
          <div class="alert-card-content">
            <div class="alert-card-header">
              <div class="alert-badges">
                <span class="route-badge route-line-2">Line 2</span>
                <span class="status-badge badge-delay">Delay</span>
              </div>
              <span class="alert-timestamp">1h ago</span>
            </div>
            <p class="alert-title">Line 2: Delays of up to 10 minutes in both directions</p>
            <p class="alert-description">Due to earlier signal problem at Pape station.</p>
          </div>
        </div>
        
        <!-- Alert: RSZ (Slow Zone) - Integrated into Delays category -->
        <div class="alert-card">
          <div class="alert-card-content">
            <div class="alert-card-header">
              <div class="alert-badges">
                <span class="route-badge route-streetcar">501</span>
                <span class="status-badge badge-slowzone">
                  <i data-lucide="gauge" class="w-3 h-3"></i>
                  Slow Zone
                </span>
              </div>
              <span class="alert-timestamp">6h ago</span>
            </div>
            <p class="alert-title">501 Queen: Slower than usual between Roncesvalles and Dufferin</p>
            <div class="rsz-indicator">
              <i data-lucide="construction" class="w-3.5 h-3.5 icon"></i>
              <span>Track maintenance â€” expect 5-8 min added travel time</span>
            </div>
          </div>
        </div>
        
        <!-- Alert: Another RSZ -->
        <div class="alert-card">
          <div class="alert-card-content">
            <div class="alert-card-header">
              <div class="alert-badges">
                <span class="route-badge route-streetcar">504</span>
                <span class="status-badge badge-slowzone">
                  <i data-lucide="gauge" class="w-3 h-3"></i>
                  Slow Zone
                </span>
              </div>
              <span class="alert-timestamp">2d ago</span>
            </div>
            <p class="alert-title">504 King: Reduced speed zone at King & Bathurst</p>
            <div class="rsz-indicator">
              <i data-lucide="construction" class="w-3.5 h-3.5 icon"></i>
              <span>Infrastructure work â€” ongoing until Dec 28</span>
            </div>
          </div>
        </div>
        
        <!-- Recently Resolved Section -->
        <div class="resolved-section">
          <div class="resolved-header" onclick="toggleResolved()">
            <div class="resolved-title">
              <i data-lucide="check-circle" class="w-4 h-4 text-green-400"></i>
              <span>Recently Resolved</span>
              <span class="resolved-count">5</span>
            </div>
            <i data-lucide="chevron-down" class="w-4 h-4 text-[hsl(var(--muted-foreground))]" id="resolved-chevron"></i>
          </div>
          <div class="resolved-list" id="resolved-list">
            <div class="resolved-item">
              <span class="route-badge route-bus">85</span>
              <div class="resolved-item-info">
                <p class="resolved-item-title">85 Sheppard East: Service resumed</p>
                <p class="resolved-item-time">Resolved 30 min ago</p>
              </div>
            </div>
            <div class="resolved-item">
              <span class="route-badge route-bus">39</span>
              <div class="resolved-item-info">
                <p class="resolved-item-title">39 Finch East: Normal service</p>
                <p class="resolved-item-time">Resolved 1 hour ago</p>
              </div>
            </div>
            <div class="resolved-item">
              <span class="route-badge route-streetcar">505</span>
              <div class="resolved-item-info">
                <p class="resolved-item-title">505 Dundas: Detour ended</p>
                <p class="resolved-item-time">Resolved 2 hours ago</p>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>
    
    <!-- ========== PLANNED TAB CONTENT ========== -->
    <div id="planned-content" class="hidden">
      
      <!-- Planned Sub-tabs: Closures | Route Changes -->
      <div class="planned-subtabs">
        <button class="planned-subtab active" onclick="setPlannedTab(this, 'closures')">
          <i data-lucide="x-circle" class="w-4 h-4"></i>
          <span>Closures</span>
          <span class="count">5</span>
        </button>
        <button class="planned-subtab" onclick="setPlannedTab(this, 'route-changes')">
          <i data-lucide="git-branch" class="w-4 h-4"></i>
          <span>Route Changes</span>
          <span class="count">3</span>
        </button>
      </div>
      
      <!-- Closures Content -->
      <div class="content-area" id="closures-content">
        
        <div class="section-divider">
          <span class="section-divider-line"></span>
          <span class="section-divider-label">This Weekend</span>
          <span class="section-divider-line"></span>
        </div>
        
        <!-- Weekend Closure -->
        <div class="planned-card">
          <div class="planned-card-header">
            <span class="route-badge route-line-1">Line 1</span>
            <span class="status-badge badge-planned">Weekend Closure</span>
          </div>
          <div class="planned-dates">
            <i data-lucide="calendar" class="w-3.5 h-3.5"></i>
            <span>Sat Dec 21 â€“ Sun Dec 22, 2025</span>
          </div>
          <p class="planned-title">No subway service: Eglinton to Sheppard-Yonge stations</p>
          <p class="planned-description">Shuttle buses will operate. Use Line 2 via Yonge-Bloor as alternate.</p>
          <a href="#" class="planned-link">
            More info
            <i data-lucide="external-link" class="w-3 h-3"></i>
          </a>
        </div>
        
        <!-- Another closure -->
        <div class="planned-card">
          <div class="planned-card-header">
            <span class="route-badge route-line-2">Line 2</span>
            <span class="status-badge badge-planned">Weekend Closure</span>
          </div>
          <div class="planned-dates">
            <i data-lucide="calendar" class="w-3.5 h-3.5"></i>
            <span>Sat Dec 28 â€“ Sun Dec 29, 2025</span>
          </div>
          <p class="planned-title">No subway service: Kennedy to Warden stations</p>
          <p class="planned-description">Shuttle buses will operate between stations.</p>
          <a href="#" class="planned-link">
            More info
            <i data-lucide="external-link" class="w-3 h-3"></i>
          </a>
        </div>
        
        <div class="section-divider">
          <span class="section-divider-line"></span>
          <span class="section-divider-label">Coming Up</span>
          <span class="section-divider-line"></span>
        </div>
        
        <!-- Future closure -->
        <div class="planned-card">
          <div class="planned-card-header">
            <span class="route-badge route-line-4">Line 4</span>
            <span class="status-badge badge-planned">Full Closure</span>
          </div>
          <div class="planned-dates">
            <i data-lucide="calendar" class="w-3.5 h-3.5"></i>
            <span>Jan 4 â€“ Jan 12, 2026</span>
          </div>
          <p class="planned-title">Line 4 Sheppard: Full line closure for track maintenance</p>
          <p class="planned-description">Shuttle buses will replace subway service.</p>
          <a href="#" class="planned-link">
            More info
            <i data-lucide="external-link" class="w-3 h-3"></i>
          </a>
        </div>
        
      </div>
      
      <!-- Route Changes Content (hidden by default) -->
      <div class="content-area hidden" id="route-changes-content">
        
        <div class="section-divider">
          <span class="section-divider-line"></span>
          <span class="section-divider-label">Active Route Changes</span>
          <span class="section-divider-line"></span>
        </div>
        
        <!-- Planned Route Change -->
        <div class="planned-card">
          <div class="planned-card-header">
            <span class="route-badge route-streetcar">501</span>
            <span class="status-badge badge-route-change">Route Change</span>
          </div>
          <div class="planned-dates">
            <i data-lucide="calendar" class="w-3.5 h-3.5"></i>
            <span>Dec 15, 2025 â€“ Jan 15, 2026</span>
          </div>
          <p class="planned-title">501 Queen: Diverting via King St between Spadina and Parliament</p>
          <p class="planned-description">Due to Queen St construction. Temporary stops on King St. Long Branch and Neville Park branches operating normally west/east of diversion.</p>
          <a href="#" class="planned-link">
            View affected stops
            <i data-lucide="external-link" class="w-3 h-3"></i>
          </a>
        </div>
        
        <!-- Another route change -->
        <div class="planned-card">
          <div class="planned-card-header">
            <span class="route-badge route-bus">95</span>
            <span class="route-badge route-express">995</span>
            <span class="status-badge badge-route-change">Route Change</span>
          </div>
          <div class="planned-dates">
            <i data-lucide="calendar" class="w-3.5 h-3.5"></i>
            <span>Dec 18 â€“ Dec 31, 2025</span>
          </div>
          <p class="planned-title">95/995 York Mills: Operating via Don Mills Rd between Leslie and DVP</p>
          <p class="planned-description">York Mills Rd closed for bridge repairs. Buses not serving York Mills stops between Leslie St and Don Mills Rd.</p>
          <a href="#" class="planned-link">
            View affected stops
            <i data-lucide="external-link" class="w-3 h-3"></i>
          </a>
        </div>
        
        <div class="section-divider">
          <span class="section-divider-line"></span>
          <span class="section-divider-label">Upcoming Route Changes</span>
          <span class="section-divider-line"></span>
        </div>
        
        <!-- Future route change -->
        <div class="planned-card">
          <div class="planned-card-header">
            <span class="route-badge route-bus">29</span>
            <span class="status-badge badge-route-change">Route Change</span>
          </div>
          <div class="planned-dates">
            <i data-lucide="calendar" class="w-3.5 h-3.5"></i>
            <span>Starting Jan 6, 2026 (6 months)</span>
          </div>
          <p class="planned-title">29 Dufferin: Temporary routing via Lansdowne Ave south of Bloor</p>
          <p class="planned-description">Due to Dufferin St reconstruction project. Route will operate via Lansdowne Ave, King St, and Dufferin St.</p>
          <a href="#" class="planned-link">
            View affected stops
            <i data-lucide="external-link" class="w-3 h-3"></i>
          </a>
        </div>
        
      </div>
    </div>
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active">
        <i data-lucide="alert-triangle"></i>
        <span>Alerts</span>
      </button>
      <button class="nav-item">
        <i data-lucide="map-pin"></i>
        <span>My Routes</span>
      </button>
      <button class="nav-item">
        <i data-lucide="settings"></i>
        <span>Settings</span>
      </button>
    </nav>
    
  </div>
  
  <!-- Design Notes (below phone) -->
  <div class="max-w-2xl mx-auto px-4 py-8 text-sm">
    <h2 class="text-lg font-semibold mb-4">IA Design Decisions</h2>
    
    <div class="space-y-4">
      <div class="p-4 rounded-lg bg-[hsl(var(--card))] border border-[hsl(var(--border))]">
        <h3 class="font-semibold mb-2 flex items-center gap-2">
          <span class="w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs">1</span>
          Two Primary Tabs: Now | Planned
        </h3>
        <p class="text-[hsl(var(--muted-foreground))]">
          <strong>"Now"</strong> = What's happening right now (active disruptions, delays, elevator outages)<br>
          <strong>"Planned"</strong> = What's coming up (closures, route changes)
        </p>
      </div>
      
      <div class="p-4 rounded-lg bg-[hsl(var(--card))] border border-[hsl(var(--border))]">
        <h3 class="font-semibold mb-2 flex items-center gap-2">
          <span class="w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs">2</span>
          RSZ Integration
        </h3>
        <p class="text-[hsl(var(--muted-foreground))]">
          RSZ (Reduced Speed Zones) are shown in the <strong>"Delays"</strong> category with a distinct <strong>"Slow Zone"</strong> badge and dashed yellow border. They're grouped with delays because they both answer: "Will I be late?"
        </p>
      </div>
      
      <div class="p-4 rounded-lg bg-[hsl(var(--card))] border border-[hsl(var(--border))]">
        <h3 class="font-semibold mb-2 flex items-center gap-2">
          <span class="w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs">3</span>
          Planned Service Changes (NEW)
        </h3>
        <p class="text-[hsl(var(--muted-foreground))]">
          Under "Planned" tab, added <strong>"Route Changes"</strong> sub-tab for temporary route modifications. Shows duration, affected stops, and reason. Separate from "Closures" (full service suspensions).
        </p>
      </div>
      
      <div class="p-4 rounded-lg bg-[hsl(var(--card))] border border-[hsl(var(--border))]">
        <h3 class="font-semibold mb-2 flex items-center gap-2">
          <span class="w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs">4</span>
          My Routes Stays Separate
        </h3>
        <p class="text-[hsl(var(--muted-foreground))]">
          "My Routes" remains as its own bottom nav item (existing feature). This page focuses on system-wide alerts. Users can switch to "My Routes" to see only their saved routes.
        </p>
      </div>
      
      <div class="p-4 rounded-lg bg-[hsl(var(--card))] border border-[hsl(var(--border))]">
        <h3 class="font-semibold mb-2 flex items-center gap-2">
          <span class="w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs">5</span>
          Compact Subway Status
        </h3>
        <p class="text-[hsl(var(--muted-foreground))]">
          Subway status is now a horizontal scrollable bar with small chips instead of 4 large cards. Saves vertical space on mobile. Tap a line to filter to its alerts.
        </p>
      </div>
      
      <div class="p-4 rounded-lg bg-[hsl(var(--card))] border border-[hsl(var(--border))]">
        <h3 class="font-semibold mb-2 flex items-center gap-2">
          <span class="w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs">6</span>
          Recently Resolved at Bottom
        </h3>
        <p class="text-[hsl(var(--muted-foreground))]">
          "Resolved" is no longer a separate tab. It's a collapsible section at the bottom of "Now" showing what just got fixed. Less important than current issues, but still accessible.
        </p>
      </div>
    </div>
    
    <div class="mt-8 p-4 rounded-lg bg-green-500/10 border border-green-500/30">
      <h3 class="font-semibold text-green-400 mb-2">Mental Model Alignment</h3>
      <div class="grid grid-cols-2 gap-4 text-xs">
        <div>
          <p class="font-semibold text-[hsl(var(--muted-foreground))] mb-2">User Questions:</p>
          <ul class="space-y-1 text-[hsl(var(--muted-foreground))]">
            <li>â€¢ "Is my route running?"</li>
            <li>â€¢ "How late will I be?"</li>
            <li>â€¢ "Is the elevator working?"</li>
            <li>â€¢ "Any closures this weekend?"</li>
            <li>â€¢ "Is my route changing soon?"</li>
            <li>â€¢ "What just got fixed?"</li>
          </ul>
        </div>
        <div>
          <p class="font-semibold text-green-400 mb-2">Where to Find It:</p>
          <ul class="space-y-1">
            <li>â†’ Now â†’ Disruptions</li>
            <li>â†’ Now â†’ Delays (incl. RSZ)</li>
            <li>â†’ Now â†’ Elevators</li>
            <li>â†’ Planned â†’ Closures</li>
            <li>â†’ Planned â†’ Route Changes</li>
            <li>â†’ Now â†’ Recently Resolved</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // Initialize Lucide icons
    lucide.createIcons();
    
    // Tab switching
    function switchTab(tab) {
      document.querySelectorAll('.primary-tab').forEach(t => t.classList.remove('active'));
      document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
      
      if (tab === 'now') {
        document.getElementById('now-content').classList.remove('hidden');
        document.getElementById('planned-content').classList.add('hidden');
      } else {
        document.getElementById('now-content').classList.add('hidden');
        document.getElementById('planned-content').classList.remove('hidden');
      }
    }
    
    // Category filter
    function setCategory(btn) {
      document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }
    
    // Planned sub-tabs
    function setPlannedTab(btn, tab) {
      document.querySelectorAll('.planned-subtab').forEach(t => t.classList.remove('active'));
      btn.classList.add('active');
      
      if (tab === 'closures') {
        document.getElementById('closures-content').classList.remove('hidden');
        document.getElementById('route-changes-content').classList.add('hidden');
      } else {
        document.getElementById('closures-content').classList.add('hidden');
        document.getElementById('route-changes-content').classList.remove('hidden');
      }
    }
    
    // Toggle resolved section
    function toggleResolved() {
      const list = document.getElementById('resolved-list');
      const chevron = document.getElementById('resolved-chevron');
      list.classList.toggle('hidden');
      chevron.style.transform = list.classList.contains('hidden') ? 'rotate(-90deg)' : '';
    }
    
    // Filter by subway line (demo)
    function filterByLine(line) {
      alert(`Filter to Line ${line} alerts (demo)`);
    }
  </script>
</body>
</html>
